DROP TABLE IF EXISTS persons cascade;
DROP TABLE IF EXISTS books;

CREATE TABLE IF NOT EXISTS persons(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(100) NOT NULL UNIQUE,
    year_of_birth DATE CHECK(year_of_birth > TO_DATE('01-01-1900', 'DD-MM-YYYY'))
);

CREATE TABLE IF NOT EXISTS books(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    author VARCHAR(100),
    name VARCHAR(200) NOT NULL,
    year_of_production INTEGER ,
    borrower INTEGER REFERENCES persons(id) ON UPDATE CASCADE ON DELETE SET NULL
);